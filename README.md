# ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì¸í„´ì‹­ í”„ë¡ íŠ¸ì—”ë“œ - 4ì£¼ì°¨ ê³¼ì œ

ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© ì¸í„´ì‹­ í”„ë¡ ë“œì—”ë“œì—ì„œ 4ì£¼ì°¨ ê³¼ì œë¡œ ì§„í–‰í•œ  
**ì£¼ì–´ì§„ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹œê³„ì—´ ì°¨íŠ¸ ì œì‘**í•˜ì—¬ ì›¹ì‚¬ì´íŠ¸ë¥¼ êµ¬ì¶•í•˜ëŠ” í”„ë¡œì íŠ¸ ì…ë‹ˆë‹¤ :)

## ê°œë°œ í™˜ê²½

### Developement

<img src="https://img.shields.io/badge/Node.js v18 (LTS)-grey?style=for-the-badge&logo=nodedotjs"> <img src="https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=React&logoColor=white"/> <img src="https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=TypeScript&logoColor=white"/>

### Convention

<img src="https://img.shields.io/badge/husky-brown?style=for-the-badge&logo=npm"> <img src="https://img.shields.io/badge/lint staged-white?style=for-the-badge&logo=npm"> <img src="https://img.shields.io/badge/ESLint-4B32C3?style=for-the-badge&logo=eslint"> <img src="https://img.shields.io/badge/Prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=white">

### Network & Route

<img src="https://img.shields.io/badge/React Router-CA4245?style=for-the-badge&logo=React Router&logoColor=white"> <img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=Axios&logoColor=white"/>

### Styling

<img src="https://img.shields.io/badge/styled component-DB7093?style=for-the-badge&logo=styled-components&logoColor=white"/>

## í”„ë¡œì íŠ¸ ì‹¤í–‰ ë°©ë²•

[ë°°í¬ëœ ì‚¬ì´íŠ¸](https://wanted-pre-onboarding-frontend-4.vercel.app/)ë¡œ í™•ì¸í•˜ì‹œê±°ë‚˜, ì•„ë˜ì˜ ê³¼ì •ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš” !!

1. ìš°ì¸¡ ìƒë‹¨ì˜ `Code`ë²„íŠ¼ -> `Download ZIP`ì„ ëˆŒëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œ í•˜ì‹œê±°ë‚˜,
   ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ í”„ë¡œì íŠ¸ë¥¼ clone í•´ì£¼ì„¸ìš”.
   
     ```
     npm clone https://github.com/wisdomin121/wanted-pre-onboarding-frontend-4.git
     ```
2. í”„ë¡œì íŠ¸ ë‹¤ìš´ë¡œë“œê°€ ëë‚¬ë‹¤ë©´, í•´ë‹¹ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•´ í”„ë¡œì íŠ¸ì— í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì£¼ì„¸ìš”.
   
     ```
     npm install
     ```
     
3. íŒ¨í‚¤ì§€ ì„¤ì¹˜ê°€ ëë‚¬ë‹¤ë©´, ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ ì‹¤í–‰ì‹œì¼œì£¼ì„¸ìš” !
     ```
     npm start
     ```

## ë°°í¬ ë§í¬ ë° ë°ëª¨ ì˜ìƒ

ë°°í¬ëŠ” `Vercel`ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤ :)  
https://wanted-pre-onboarding-frontend-3.vercel.app/



https://github.com/wisdomin121/wanted-pre-onboarding-frontend-4/assets/46989954/feff632e-d228-41aa-860d-954e3dbddf8b



## ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
ğŸ“¦src
 â”£ ğŸ“‚apis
 â”£ ğŸ“‚components
 â”£ ğŸ“‚pages
 â”£ ğŸ“‚styles
 â”£ ğŸ“‚types
```

## ê¸°ëŠ¥ ì„¤ëª…

**1. ê·¸ë˜í”„ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ íƒ**

ì´ˆë°˜ì—ëŠ” **ApexCharts.js**ì˜ [Line Column Area](https://apexcharts.com/react-chart-demos/mixed-charts/line-column-area/)ë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤.   
í•˜ì§€ë§Œ, ì‚¬ìš©í•˜ë‹¤ ë³´ë‹ˆ í•œ ê°€ì§€ì˜ ë¬¸ì œì ì´ ìƒê²¼ìŠµë‹ˆë‹¤.   
```
barê·¸ë˜í”„ê°€ ë¬´ì¡°ê±´ ë§¨ ì•ì— ìœ„ì¹˜í•œë‹¤.
-> ê³¼ì œì˜ ë°ì´í„°ëŠ” bar ê·¸ë˜í”„ê°€ ë” ë†’ì´ ìˆê¸° ë•Œë¬¸ì— area ê·¸ë˜í”„ê°€ ì œëŒ€ë¡œ ë³´ì´ì§€ ì•Šì•˜ë‹¤.
-> seriesì˜ ìˆœì„œë¥¼ ë°”ê¾¸ë©´ ëœë‹¤ê³  í–ˆì§€ë§Œ, ì ìš©ì´ ë˜ì§€ ì•Šì•˜ë‹¤.
```
ì•½ê°„ì€ ì‚¬ì†Œí•œ ë¬¸ì œì ì¼ ìˆ˜ë„ ìˆì§€ë§Œ, ê³¼ì œì˜ ì˜ë„ì™€ëŠ” ë§ì§€ ì•ŠëŠ”ë‹¤ê³  ìƒê°í•´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë³€ê²½í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.   
   
ê·¸ë ‡ê²Œ ì—¬ëŸ¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì°¾ì•„ë³´ë‹¤ê°€ **Recharts**ì˜ [LineBarAreaComposedChart](https://recharts.org/en-US/examples/LineBarAreaComposedChart)ê°€ ê¸°ì¡´ì— ì„ íƒí–ˆë˜ ApexCharts.jsì˜ Line Column Areaì™€ ë¹„ìŠ·í•´ ê³¼ì œë¥¼ êµ¬í˜„í•˜ê¸°ì— ì•Œë§ë‹¤ê³  ìƒê°ì´ ë“¤ì–´ì„œ í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. 

---

**2. ì‹œê³„ì—´ ì°¨íŠ¸ ë§Œë“¤ê¸°**   
   
- ì£¼ì–´ì§„ ë°ì´í„°ë¥¼ json-serverë¥¼ ì‚¬ìš©í•´ apií™” ì‹œí‚¨ë‹¤.
  - ë°°í¬ github : https://github.com/wisdomin121/wanted-pre-onboarding-frontend-4-json-server
  - ë°°í¬ ì£¼ì†Œ : https://wanted-pre-onboarding-frontend-4-json-server.vercel.app/

- axiosë¥¼ í†µí•´ ë¶ˆëŸ¬ì™€ ë°ì´í„°ë¥¼ ì¬êµ¬ì„±í•˜ì—¬ datasì— ì €ì¥í•œë‹¤ë‹¤.
  ```
  // src/pages/MainPage.tsx
  const [datas, setDatas] = useState<Data[]>([])

  useEffect(() => {
    dataAPI.get().then((res) => {
      const unprocessedDatas = res.data.response
      const processedDatas = []

      for (const time in unprocessedDatas) {
        const unprocessedData = unprocessedDatas[time]

        processedDatas.push({
          time: time.split(' ')[1],
          loc: unprocessedData.id,
          valueArea: unprocessedData.value_area,
          valueBar: unprocessedData.value_bar,
        })
      }
      setDatas(processedDatas)
    })
  }, [])
  ```

- ReChartsë¥¼ ì‚¬ìš©í•´ ê·¸ë˜í”„ë¥¼ ê·¸ë ¤ì¤€ë‹¤.
  ```
  // src/components/TimeSeries.tsx
  
  <ResponsiveContainer width="100%" height={500}>
    <ComposedChart
      data={datas}
      margin={{
        top: 20,
        right: 20, 
        bottom: 20,
        left: 20,
      }}
    >
      <CartesianGrid stroke={Theme.colors.grid} />
      <XAxis dataKey="time" scale="band" />
      <YAxis
        yAxisId="Area"
        dataKey="valueArea"
        orientation="left"
        label={{ value: 'Area', angle: -90, position: 'insideLeft' }}
        domain={[0, 200]}
      />
      <YAxis
        yAxisId="Bar"
        dataKey="valueBar"
        orientation="right"
        label={{ value: 'Bar', angle: -90, position: 'insideRight' }}
      />
      <Tooltip content={<CustomTooltip />} />
      <Legend />
      <Bar
        yAxisId="Bar"
        dataKey="valueBar"
        barSize={20}
        fill={Theme.colors.unclickedBar}
        onClick={(data) => {
          locClicked(data.loc)
        }}
      >
        {datas.map((data: Data, idx: number) => {
          return (
            <Cell
              key={idx}
              fill={
                clickedLoc.has(data.loc) ? Theme.colors.clickedBar : Theme.colors.unclickedBar
              }
            />
          )
        })}
      </Bar>
      <Area
        yAxisId="Area"
        type="monotone"
        dataKey="valueArea"
        fill={Theme.colors.area}
        stroke={Theme.colors.area}
      />
    </ComposedChart>
  </ResponsiveContainer>
  ```

---

3. **í˜¸ë²„ ê¸°ëŠ¥ êµ¬í˜„**   

- CustomTooltip ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“ ë‹¤. (id, value_area, value_bar í¬í•¨)
  ```
  // src/components/CustomTooltip.tsx
  
  function Tooltip({ active, payload }: TooltipProps<ValueType, NameType>) {
    if (active && payload && payload.length) {
      const data = payload[0].payload

      return (
        <TooltipStyled>
          <LocStyled>{data.loc}</LocStyled>
          <ValueStyled>Area: {data.valueArea}</ValueStyled>
          <ValueStyled>Bar: {data.valueBar}</ValueStyled>
        </TooltipStyled>
      )
    }

    return <></>
  }
  ```

- Tooltip contentì— ë„£ì–´ì¤€ë‹¤.
  ```
  // src/components/TimeSeries.tsx
  
  <Tooltip content={<CustomTooltip />} />
  ```

---

4. **í•„í„°ë§ ê¸°ëŠ¥ êµ¬í˜„**

- ì§€ì—­ì´ë¦„ì„ ê°€ì§„ ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸ ìƒì„±í•˜ê³ , ê·¸ë˜í”„ ìœ„ì— ìœ„ì¹˜ì‹œí‚¨ë‹¤.
  ```
  // src/components/LocButton.tsx

  function LocButton({ loc, isClicked, locClicked }: LocButtonProps) {
    return (
      <LocButtonStyled
        $isClicked={isClicked}
        onClick={() => {
          locClicked(loc)
        }}
      >
        {loc}
      </LocButtonStyled>
    )
  }
  ```
  ```
  // src/components/LocButtons.tsx
  
  function LocButtons({ locs, clickedLoc, locClicked }: LocButttonsProps) {
    return (
      <LocButtonsStyled>
        {locs.map((loc: string, idx: number) => {
          return (
            <LocButton key={idx} loc={loc} isClicked={clickedLoc.has(loc)} locClicked={locClicked} />
          )
        })}
      </LocButtonsStyled>
    )
  }
  ```
  ```
  // src/pages/MainPage.tsx

  <MainStyled>
    <LocButtons locs={locs} clickedLoc={clickedLoc} locClicked={locClicked} />
    <TimeSeries datas={datas} clickedLoc={clickedLoc} locClicked={locClicked} />
  </MainStyled>
  ```

- í´ë¦­ëœ ë²„íŠ¼ì„ setê°ì²´ë¡œ ê´€ë¦¬í•œë‹¤.
  ```
  // src/pages/MainPage.tsx

  const [clickedLoc, setClickedLoc] = useState<Set<string>>(new Set())

  const locClicked = (loc: string) => {
    if (clickedLoc.has(loc)) {
      setClickedLoc((prev) => {
        prev.delete(loc)
        return new Set(prev)
      })
    } else {
      setClickedLoc((prev) => new Set(prev.add(loc)))
    }
  }
  ```

- clickedLocì— í¬í•¨ë˜ì–´ ìˆëŠ” ì§€ì—­ì´ë¼ë©´, ìƒ‰ìƒì„ ë³€ê²½ì‹œì¼œì¤€ë‹¤.
  ```
  // src/components/TimeSeries.tsx
  
  <Bar
    yAxisId="Bar"
    dataKey="valueBar"
    barSize={20}
    fill={Theme.colors.unclickedBar}
    onClick={(data) => {
      locClicked(data.loc)
    }}
  >
    {datas.map((data: Data, idx: number) => {
      return (
        <Cell
          key={idx}
          fill={
            clickedLoc.has(data.loc) ? Theme.colors.clickedBar : Theme.colors.unclickedBar
          }
        />
      )
    })}
  </Bar>
  ```
